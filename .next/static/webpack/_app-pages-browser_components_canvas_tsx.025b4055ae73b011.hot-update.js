"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_app-pages-browser_components_canvas_tsx",{

/***/ "(app-pages-browser)/./components/canvas.tsx":
/*!*******************************!*\
  !*** ./components/canvas.tsx ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Canvas: () => (/* binding */ Canvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var reactflow__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! reactflow */ \"(app-pages-browser)/./node_modules/@reactflow/core/dist/esm/index.mjs\");\n/* harmony import */ var reactflow__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! reactflow */ \"(app-pages-browser)/./node_modules/@reactflow/controls/dist/esm/index.mjs\");\n/* harmony import */ var reactflow_dist_style_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! reactflow/dist/style.css */ \"(app-pages-browser)/./node_modules/reactflow/dist/style.css\");\n/* harmony import */ var _lib_store__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/store */ \"(app-pages-browser)/./lib/store.ts\");\n/* harmony import */ var _nodes_custom_node__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./nodes/custom-node */ \"(app-pages-browser)/./components/nodes/custom-node.tsx\");\n/* harmony import */ var _edges_custom_edge__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./edges/custom-edge */ \"(app-pages-browser)/./components/edges/custom-edge.tsx\");\n/* harmony import */ var _toolbar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./toolbar */ \"(app-pages-browser)/./components/toolbar.tsx\");\n/* __next_internal_client_entry_do_not_use__ Canvas auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nconst nodeTypes = {\n    custom: _nodes_custom_node__WEBPACK_IMPORTED_MODULE_4__.CustomNode\n};\nconst edgeTypes = {\n    custom: _edges_custom_edge__WEBPACK_IMPORTED_MODULE_5__.CustomEdge\n};\nfunction FlowCanvas() {\n    _s();\n    const reactFlowWrapper = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { currentTool, setCurrentTool, currentLayout, nodes, edges, setNodes, setEdges, saveToHistory, undo, selectedNodes, selectedEdges, setSelectedNodes, setSelectedEdges, clipboard, setClipboard } = (0,_lib_store__WEBPACK_IMPORTED_MODULE_3__.useAppStore)();\n    const { project } = (0,reactflow__WEBPACK_IMPORTED_MODULE_7__.useReactFlow)();\n    // Generate unique ID for new nodes\n    const generateNodeId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[generateNodeId]\": ()=>\"node-\".concat(Date.now(), \"-\").concat(Math.random())\n    }[\"FlowCanvas.useCallback[generateNodeId]\"], []);\n    const generateEdgeId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[generateEdgeId]\": ()=>\"edge-\".concat(Date.now(), \"-\").concat(Math.random())\n    }[\"FlowCanvas.useCallback[generateEdgeId]\"], []);\n    // Keyboard shortcuts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FlowCanvas.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"FlowCanvas.useEffect.handleKeyDown\": (event)=>{\n                    var _document_activeElement;\n                    // Prevent shortcuts when editing text\n                    if (((_document_activeElement = document.activeElement) === null || _document_activeElement === void 0 ? void 0 : _document_activeElement.tagName) === 'TEXTAREA') {\n                        return;\n                    }\n                    // Copy (Ctrl+C)\n                    if (event.ctrlKey && event.key === 'c') {\n                        event.preventDefault();\n                        if (selectedNodes.length > 0) {\n                            const selectedNodeIds = selectedNodes.map({\n                                \"FlowCanvas.useEffect.handleKeyDown.selectedNodeIds\": (node)=>node.id\n                            }[\"FlowCanvas.useEffect.handleKeyDown.selectedNodeIds\"]);\n                            const selectedEdges = edges.filter({\n                                \"FlowCanvas.useEffect.handleKeyDown.selectedEdges\": (edge)=>selectedNodeIds.includes(edge.source) && selectedNodeIds.includes(edge.target)\n                            }[\"FlowCanvas.useEffect.handleKeyDown.selectedEdges\"]);\n                            setClipboard({\n                                nodes: selectedNodes,\n                                edges: selectedEdges\n                            });\n                        }\n                    }\n                    // Paste (Ctrl+V)\n                    if (event.ctrlKey && event.key === 'v') {\n                        event.preventDefault();\n                        if (clipboard) {\n                            const nodeIdMap = new Map();\n                            const newNodes = clipboard.nodes.map({\n                                \"FlowCanvas.useEffect.handleKeyDown.newNodes\": (node)=>{\n                                    const newId = generateNodeId();\n                                    nodeIdMap.set(node.id, newId);\n                                    return {\n                                        ...node,\n                                        id: newId,\n                                        position: {\n                                            x: node.position.x + 50,\n                                            y: node.position.y + 50\n                                        },\n                                        selected: false\n                                    };\n                                }\n                            }[\"FlowCanvas.useEffect.handleKeyDown.newNodes\"]);\n                            const newEdges = clipboard.edges.map({\n                                \"FlowCanvas.useEffect.handleKeyDown.newEdges\": (edge)=>({\n                                        ...edge,\n                                        id: generateEdgeId(),\n                                        source: nodeIdMap.get(edge.source),\n                                        target: nodeIdMap.get(edge.target)\n                                    })\n                            }[\"FlowCanvas.useEffect.handleKeyDown.newEdges\"]);\n                            setNodes([\n                                ...nodes,\n                                ...newNodes\n                            ]);\n                            setEdges([\n                                ...edges,\n                                ...newEdges\n                            ]);\n                            saveToHistory();\n                        }\n                    }\n                    // Delete (Del)\n                    if (event.key === 'Delete') {\n                        event.preventDefault();\n                        // Delete selected nodes\n                        if (selectedNodes.length > 0) {\n                            const selectedNodeIds = selectedNodes.map({\n                                \"FlowCanvas.useEffect.handleKeyDown.selectedNodeIds\": (node)=>node.id\n                            }[\"FlowCanvas.useEffect.handleKeyDown.selectedNodeIds\"]);\n                            setNodes(nodes.filter({\n                                \"FlowCanvas.useEffect.handleKeyDown\": (node)=>!selectedNodeIds.includes(node.id)\n                            }[\"FlowCanvas.useEffect.handleKeyDown\"]));\n                            setEdges(edges.filter({\n                                \"FlowCanvas.useEffect.handleKeyDown\": (edge)=>!selectedNodeIds.includes(edge.source) && !selectedNodeIds.includes(edge.target)\n                            }[\"FlowCanvas.useEffect.handleKeyDown\"]));\n                            setSelectedNodes([]);\n                            setSelectedEdges([]);\n                            saveToHistory();\n                        }\n                        // Delete selected edges\n                        if (selectedEdges.length > 0) {\n                            const selectedEdgeIds = selectedEdges.map({\n                                \"FlowCanvas.useEffect.handleKeyDown.selectedEdgeIds\": (edge)=>edge.id\n                            }[\"FlowCanvas.useEffect.handleKeyDown.selectedEdgeIds\"]);\n                            setEdges(edges.filter({\n                                \"FlowCanvas.useEffect.handleKeyDown\": (edge)=>!selectedEdgeIds.includes(edge.id)\n                            }[\"FlowCanvas.useEffect.handleKeyDown\"]));\n                            setSelectedEdges([]);\n                            saveToHistory();\n                        }\n                    }\n                    // Undo (Ctrl+Z)\n                    if (event.ctrlKey && event.key === 'z') {\n                        event.preventDefault();\n                        undo();\n                    }\n                }\n            }[\"FlowCanvas.useEffect.handleKeyDown\"];\n            document.addEventListener('keydown', handleKeyDown);\n            return ({\n                \"FlowCanvas.useEffect\": ()=>document.removeEventListener('keydown', handleKeyDown)\n            })[\"FlowCanvas.useEffect\"];\n        }\n    }[\"FlowCanvas.useEffect\"], [\n        selectedNodes,\n        selectedEdges,\n        nodes,\n        edges,\n        clipboard,\n        setNodes,\n        setEdges,\n        setSelectedNodes,\n        setSelectedEdges,\n        setClipboard,\n        saveToHistory,\n        undo,\n        generateNodeId,\n        generateEdgeId\n    ]);\n    const onNodesChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onNodesChange]\": (changes)=>{\n            setNodes((0,reactflow__WEBPACK_IMPORTED_MODULE_7__.applyNodeChanges)(changes, nodes));\n        }\n    }[\"FlowCanvas.useCallback[onNodesChange]\"], [\n        nodes,\n        setNodes\n    ]);\n    const onEdgesChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onEdgesChange]\": (changes)=>{\n            setEdges((0,reactflow__WEBPACK_IMPORTED_MODULE_7__.applyEdgeChanges)(changes, edges));\n        }\n    }[\"FlowCanvas.useCallback[onEdgesChange]\"], [\n        edges,\n        setEdges\n    ]);\n    const onConnect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onConnect]\": (params)=>{\n            const newEdge = {\n                id: generateEdgeId(),\n                type: 'custom',\n                ...params,\n                data: {\n                    strokeColor: '#70f',\n                    strokeWidth: 2,\n                    strokeStyle: 'solid',\n                    animated: false,\n                    showArrow: true\n                }\n            };\n            setEdges((0,reactflow__WEBPACK_IMPORTED_MODULE_7__.addEdge)(newEdge, edges));\n            saveToHistory();\n        }\n    }[\"FlowCanvas.useCallback[onConnect]\"], [\n        edges,\n        setEdges,\n        saveToHistory,\n        generateEdgeId\n    ]);\n    const onPaneClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onPaneClick]\": (event)=>{\n            var _reactFlowWrapper_current;\n            // Close any open popups and editing state when clicking on empty canvas\n            const state = _lib_store__WEBPACK_IMPORTED_MODULE_3__.useAppStore.getState();\n            state.setEditingNodeId(null);\n            // Force close all popups by triggering a global popup close event\n            const popupCloseEvent = new CustomEvent('closeAllPopups');\n            document.dispatchEvent(popupCloseEvent);\n            if (currentTool === 'select') return;\n            const bounds = (_reactFlowWrapper_current = reactFlowWrapper.current) === null || _reactFlowWrapper_current === void 0 ? void 0 : _reactFlowWrapper_current.getBoundingClientRect();\n            if (!bounds) return;\n            const position = project({\n                x: event.clientX - bounds.left,\n                y: event.clientY - bounds.top\n            });\n            const newNode = {\n                id: generateNodeId(),\n                type: 'custom',\n                position,\n                data: {\n                    label: '',\n                    nodeType: currentTool === 'label' ? 'label' : currentTool,\n                    width: currentTool === 'label' ? 80 : currentTool === 'circle' ? 80 : 90,\n                    height: currentTool === 'label' ? 30 : currentTool === 'circle' ? 80 : 60,\n                    backgroundColor: undefined,\n                    textColor: undefined,\n                    borderStyle: 'solid'\n                }\n            };\n            setNodes([\n                ...nodes,\n                newNode\n            ]);\n            saveToHistory();\n            // Auto-switch back to select mode after creating a shape\n            setCurrentTool('select');\n        }\n    }[\"FlowCanvas.useCallback[onPaneClick]\"], [\n        currentTool,\n        project,\n        nodes,\n        setNodes,\n        saveToHistory,\n        setCurrentTool,\n        generateNodeId\n    ]);\n    const onSelectionChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onSelectionChange]\": (params)=>{\n            setSelectedNodes(params.nodes);\n            setSelectedEdges(params.edges);\n        }\n    }[\"FlowCanvas.useCallback[onSelectionChange]\"], [\n        setSelectedNodes,\n        setSelectedEdges\n    ]);\n    const onNodeClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onNodeClick]\": (event, node)=>{\n            event.stopPropagation();\n        // Allow the node's own click handler to manage popup state\n        }\n    }[\"FlowCanvas.useCallback[onNodeClick]\"], []);\n    const onEdgeClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onEdgeClick]\": (event, edge)=>{}\n    }[\"FlowCanvas.useCallback[onEdgeClick]\"], []);\n    const onNodeDragStop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"FlowCanvas.useCallback[onNodeDragStop]\": ()=>{\n            saveToHistory();\n        }\n    }[\"FlowCanvas.useCallback[onNodeDragStop]\"], [\n        saveToHistory\n    ]);\n    // Custom node types with layout-aware handles\n    const nodeTypes = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"FlowCanvas.useMemo[nodeTypes]\": ()=>({\n                custom: ({\n                    \"FlowCanvas.useMemo[nodeTypes]\": (props)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_nodes_custom_node__WEBPACK_IMPORTED_MODULE_4__.CustomNode, {\n                            ...props,\n                            layout: currentLayout\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/canvas.tsx\",\n                            lineNumber: 253,\n                            columnNumber: 29\n                        }, this)\n                })[\"FlowCanvas.useMemo[nodeTypes]\"]\n            })\n    }[\"FlowCanvas.useMemo[nodeTypes]\"], [\n        currentLayout\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"w-full h-full\",\n        ref: reactFlowWrapper,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(reactflow__WEBPACK_IMPORTED_MODULE_7__.ReactFlow, {\n            nodes: nodes,\n            edges: edges,\n            onNodesChange: onNodesChange,\n            onEdgesChange: onEdgesChange,\n            onConnect: onConnect,\n            onPaneClick: onPaneClick,\n            onNodeClick: onNodeClick,\n            onEdgeClick: onEdgeClick,\n            onNodeDragStop: onNodeDragStop,\n            onSelectionChange: onSelectionChange,\n            nodeTypes: nodeTypes,\n            edgeTypes: edgeTypes,\n            fitView: true,\n            className: \"bg-gray-50 dark:bg-[#0a0a0a]\",\n            nodesDraggable: currentTool === 'select',\n            nodesConnectable: currentTool === 'select',\n            elementsSelectable: currentTool === 'select',\n            panOnDrag: currentTool === 'select',\n            zoomOnScroll: currentTool === 'select',\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(reactflow__WEBPACK_IMPORTED_MODULE_8__.Controls, {\n                position: \"bottom-right\",\n                className: \"bg-white dark:bg-[#101010] border border-gray-200 dark:border-gray-700\"\n            }, void 0, false, {\n                fileName: \"/home/project/components/canvas.tsx\",\n                lineNumber: 280,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/home/project/components/canvas.tsx\",\n            lineNumber: 258,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/home/project/components/canvas.tsx\",\n        lineNumber: 257,\n        columnNumber: 5\n    }, this);\n}\n_s(FlowCanvas, \"w3UEJXmbPWFODvkKIcZ2Mjyh518=\", false, function() {\n    return [\n        _lib_store__WEBPACK_IMPORTED_MODULE_3__.useAppStore,\n        reactflow__WEBPACK_IMPORTED_MODULE_7__.useReactFlow\n    ];\n});\n_c = FlowCanvas;\nfunction Canvas() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(reactflow__WEBPACK_IMPORTED_MODULE_7__.ReactFlowProvider, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_toolbar__WEBPACK_IMPORTED_MODULE_6__.Toolbar, {}, void 0, false, {\n                fileName: \"/home/project/components/canvas.tsx\",\n                lineNumber: 292,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FlowCanvas, {}, void 0, false, {\n                fileName: \"/home/project/components/canvas.tsx\",\n                lineNumber: 293,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/components/canvas.tsx\",\n        lineNumber: 291,\n        columnNumber: 5\n    }, this);\n}\n_c1 = Canvas;\nvar _c, _c1;\n$RefreshReg$(_c, \"FlowCanvas\");\n$RefreshReg$(_c1, \"Canvas\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvY2FudmFzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBRWdFO0FBZTdDO0FBQ2U7QUFDUTtBQUNPO0FBQ0E7QUFDYjtBQUVwQyxNQUFNZSxZQUFZO0lBQ2hCQyxRQUFRSiwwREFBVUE7QUFDcEI7QUFFQSxNQUFNSyxZQUFZO0lBQ2hCRCxRQUFRSCwwREFBVUE7QUFDcEI7QUFFQSxTQUFTSzs7SUFDUCxNQUFNQyxtQkFBbUJsQiw2Q0FBTUEsQ0FBaUI7SUFDaEQsTUFBTSxFQUNKbUIsV0FBVyxFQUNYQyxjQUFjLEVBQ2RDLGFBQWEsRUFDYkMsS0FBSyxFQUNMQyxLQUFLLEVBQ0xDLFFBQVEsRUFDUkMsUUFBUSxFQUNSQyxhQUFhLEVBQ2JDLElBQUksRUFDSkMsYUFBYSxFQUNiQyxhQUFhLEVBQ2JDLGdCQUFnQixFQUNoQkMsZ0JBQWdCLEVBQ2hCQyxTQUFTLEVBQ1RDLFlBQVksRUFDYixHQUFHdkIsdURBQVdBO0lBRWYsTUFBTSxFQUFFd0IsT0FBTyxFQUFFLEdBQUd6Qix1REFBWUE7SUFFaEMsbUNBQW1DO0lBQ25DLE1BQU0wQixpQkFBaUJwQyxrREFBV0E7a0RBQUMsSUFBTSxRQUFzQnFDLE9BQWRDLEtBQUtDLEdBQUcsSUFBRyxLQUFpQixPQUFkRixLQUFLRyxNQUFNO2lEQUFNLEVBQUU7SUFDbEYsTUFBTUMsaUJBQWlCekMsa0RBQVdBO2tEQUFDLElBQU0sUUFBc0JxQyxPQUFkQyxLQUFLQyxHQUFHLElBQUcsS0FBaUIsT0FBZEYsS0FBS0csTUFBTTtpREFBTSxFQUFFO0lBRWxGLHFCQUFxQjtJQUNyQnRDLGdEQUFTQTtnQ0FBQztZQUNSLE1BQU13QztzREFBZ0IsQ0FBQ0M7d0JBRWpCQztvQkFESixzQ0FBc0M7b0JBQ3RDLElBQUlBLEVBQUFBLDBCQUFBQSxTQUFTQyxhQUFhLGNBQXRCRCw4Q0FBQUEsd0JBQXdCRSxPQUFPLE1BQUssWUFBWTt3QkFDbEQ7b0JBQ0Y7b0JBRUEsZ0JB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O0lBR0osTUFBTTBELGlCQUFpQmxILGtEQUFXQTtrREFBQztZQUNqQzJCO1FBQ0Y7aURBQUc7UUFBQ0E7S0FBYztJQUVsQiw4Q0FBOEM7SUFDOUMsTUFBTVosWUFBWVosOENBQU9BO3lDQUFDLElBQU87Z0JBQy9CYSxNQUFNO3FEQUFFLENBQUNtRyxzQkFBZSw4REFBQ3ZHLDBEQUFVQTs0QkFBRSxHQUFHdUcsS0FBSzs0QkFBRUMsUUFBUTlGOzs7Ozs7O1lBQ3pEO3dDQUFJO1FBQUNBO0tBQWM7SUFFbkIscUJBQ0UsOERBQUMrRjtRQUFJQyxXQUFVO1FBQWdCQyxLQUFLcEc7a0JBQ2xDLDRFQUFDZixnREFBU0E7WUFDUm1CLE9BQU9BO1lBQ1BDLE9BQU9BO1lBQ1BrRCxlQUFlQTtZQUNmRSxlQUFlQTtZQUNmQyxXQUFXQTtZQUNYVSxhQUFhQTtZQUNid0IsYUFBYUE7WUFDYkUsYUFBYUE7WUFDYkMsZ0JBQWdCQTtZQUNoQkosbUJBQW1CQTtZQUNuQi9GLFdBQVdBO1lBQ1hFLFdBQVdBO1lBQ1h1RyxPQUFPO1lBQ1BGLFdBQVU7WUFDVkcsZ0JBQWdCckcsZ0JBQWdCO1lBQ2hDc0csa0JBQWtCdEcsZ0JBQWdCO1lBQ2xDdUcsb0JBQW9CdkcsZ0JBQWdCO1lBQ3BDd0csV0FBV3hHLGdCQUFnQjtZQUMzQnlHLGNBQWN6RyxnQkFBZ0I7c0JBRzlCLDRFQUFDWCwrQ0FBUUE7Z0JBQ1B3RCxVQUFTO2dCQUNUcUQsV0FBVTs7Ozs7Ozs7Ozs7Ozs7OztBQUtwQjtHQTlQU3BHOztRQWtCSFAsbURBQVdBO1FBRUtELG1EQUFZQTs7O0tBcEJ6QlE7QUFnUUYsU0FBUzRHO0lBQ2QscUJBQ0UsOERBQUN6SCx3REFBaUJBOzswQkFDaEIsOERBQUNTLDZDQUFPQTs7Ozs7MEJBQ1IsOERBQUNJOzs7Ozs7Ozs7OztBQUdQO01BUGdCNEciLCJzb3VyY2VzIjpbIi9ob21lL3Byb2plY3QvY29tcG9uZW50cy9jYW52YXMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RGbG93LCB7XG4gIFJlYWN0Rmxvd1Byb3ZpZGVyLFxuICBhZGRFZGdlLFxuICBDb25uZWN0aW9uLFxuICBFZGdlLFxuICBOb2RlLFxuICBhcHBseU5vZGVDaGFuZ2VzLFxuICBhcHBseUVkZ2VDaGFuZ2VzLFxuICBOb2RlQ2hhbmdlLFxuICBFZGdlQ2hhbmdlLFxuICBDb250cm9scyxcbiAgQmFja2dyb3VuZCxcbiAgdXNlUmVhY3RGbG93LFxuICBPblNlbGVjdGlvbkNoYW5nZVBhcmFtcyxcbn0gZnJvbSAncmVhY3RmbG93JztcbmltcG9ydCAncmVhY3RmbG93L2Rpc3Qvc3R5bGUuY3NzJztcbmltcG9ydCB7IHVzZUFwcFN0b3JlIH0gZnJvbSAnQC9saWIvc3RvcmUnO1xuaW1wb3J0IHsgQ3VzdG9tTm9kZSB9IGZyb20gJy4vbm9kZXMvY3VzdG9tLW5vZGUnO1xuaW1wb3J0IHsgQ3VzdG9tRWRnZSB9IGZyb20gJy4vZWRnZXMvY3VzdG9tLWVkZ2UnO1xuaW1wb3J0IHsgVG9vbGJhciB9IGZyb20gJy4vdG9vbGJhcic7XG5cbmNvbnN0IG5vZGVUeXBlcyA9IHtcbiAgY3VzdG9tOiBDdXN0b21Ob2RlLFxufTtcblxuY29uc3QgZWRnZVR5cGVzID0ge1xuICBjdXN0b206IEN1c3RvbUVkZ2UsXG59O1xuXG5mdW5jdGlvbiBGbG93Q2FudmFzKCkge1xuICBjb25zdCByZWFjdEZsb3dXcmFwcGVyID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3Qge1xuICAgIGN1cnJlbnRUb29sLFxuICAgIHNldEN1cnJlbnRUb29sLFxuICAgIGN1cnJlbnRMYXlvdXQsXG4gICAgbm9kZXMsXG4gICAgZWRnZXMsXG4gICAgc2V0Tm9kZXMsXG4gICAgc2V0RWRnZXMsXG4gICAgc2F2ZVRvSGlzdG9yeSxcbiAgICB1bmRvLFxuICAgIHNlbGVjdGVkTm9kZXMsXG4gICAgc2VsZWN0ZWRFZGdlcyxcbiAgICBzZXRTZWxlY3RlZE5vZGVzLFxuICAgIHNldFNlbGVjdGVkRWRnZXMsXG4gICAgY2xpcGJvYXJkLFxuICAgIHNldENsaXBib2FyZCxcbiAgfSA9IHVzZUFwcFN0b3JlKCk7XG5cbiAgY29uc3QgeyBwcm9qZWN0IH0gPSB1c2VSZWFjdEZsb3coKTtcblxuICAvLyBHZW5lcmF0ZSB1bmlxdWUgSUQgZm9yIG5ldyBub2Rlc1xuICBjb25zdCBnZW5lcmF0ZU5vZGVJZCA9IHVzZUNhbGxiYWNrKCgpID0+IGBub2RlLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsIFtdKTtcbiAgY29uc3QgZ2VuZXJhdGVFZGdlSWQgPSB1c2VDYWxsYmFjaygoKSA9PiBgZWRnZS0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLCBbXSk7XG5cbiAgLy8gS2V5Ym9hcmQgc2hvcnRjdXRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgLy8gUHJldmVudCBzaG9ydGN1dHMgd2hlbiBlZGl0aW5nIHRleHRcbiAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50Py50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ29weSAoQ3RybCtDKVxuICAgICAgaWYgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5ID09PSAnYycpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTm9kZUlkcyA9IHNlbGVjdGVkTm9kZXMubWFwKG5vZGUgPT4gbm9kZS5pZCk7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRFZGdlcyA9IGVkZ2VzLmZpbHRlcihlZGdlID0+IFxuICAgICAgICAgICAgc2VsZWN0ZWROb2RlSWRzLmluY2x1ZGVzKGVkZ2Uuc291cmNlKSAmJiBzZWxlY3RlZE5vZGVJZHMuaW5jbHVkZXMoZWRnZS50YXJnZXQpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRDbGlwYm9hcmQoeyBub2Rlczogc2VsZWN0ZWROb2RlcywgZWRnZXM6IHNlbGVjdGVkRWRnZXMgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUGFzdGUgKEN0cmwrVilcbiAgICAgIGlmIChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PT0gJ3YnKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChjbGlwYm9hcmQpIHtcbiAgICAgICAgICBjb25zdCBub2RlSWRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgY29uc3QgbmV3Tm9kZXMgPSBjbGlwYm9hcmQubm9kZXMubWFwKG5vZGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3SWQgPSBnZW5lcmF0ZU5vZGVJZCgpO1xuICAgICAgICAgICAgbm9kZUlkTWFwLnNldChub2RlLmlkLCBuZXdJZCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgICBpZDogbmV3SWQsXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICAgICAgeDogbm9kZS5wb3NpdGlvbi54ICsgNTAsXG4gICAgICAgICAgICAgICAgeTogbm9kZS5wb3NpdGlvbi55ICsgNTAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbmV3RWRnZXMgPSBjbGlwYm9hcmQuZWRnZXMubWFwKGVkZ2UgPT4gKHtcbiAgICAgICAgICAgIC4uLmVkZ2UsXG4gICAgICAgICAgICBpZDogZ2VuZXJhdGVFZGdlSWQoKSxcbiAgICAgICAgICAgIHNvdXJjZTogbm9kZUlkTWFwLmdldChlZGdlLnNvdXJjZSksXG4gICAgICAgICAgICB0YXJnZXQ6IG5vZGVJZE1hcC5nZXQoZWRnZS50YXJnZXQpLFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBcbiAgICAgICAgICBzZXROb2RlcyhbLi4ubm9kZXMsIC4uLm5ld05vZGVzXSk7XG4gICAgICAgICAgc2V0RWRnZXMoWy4uLmVkZ2VzLCAuLi5uZXdFZGdlc10pO1xuICAgICAgICAgIHNhdmVUb0hpc3RvcnkoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEZWxldGUgKERlbClcbiAgICAgIGlmIChldmVudC5rZXkgPT09ICdEZWxldGUnKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBEZWxldGUgc2VsZWN0ZWQgbm9kZXNcbiAgICAgICAgaWYgKHNlbGVjdGVkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkTm9kZUlkcyA9IHNlbGVjdGVkTm9kZXMubWFwKG5vZGUgPT4gbm9kZS5pZCk7XG4gICAgICAgICAgc2V0Tm9kZXMobm9kZXMuZmlsdGVyKG5vZGUgPT4gIXNlbGVjdGVkTm9kZUlkcy5pbmNsdWRlcyhub2RlLmlkKSkpO1xuICAgICAgICAgIHNldEVkZ2VzKGVkZ2VzLmZpbHRlcihlZGdlID0+IFxuICAgICAgICAgICAgIXNlbGVjdGVkTm9kZUlkcy5pbmNsdWRlcyhlZGdlLnNvdXJjZSkgJiYgIXNlbGVjdGVkTm9kZUlkcy5pbmNsdWRlcyhlZGdlLnRhcmdldClcbiAgICAgICAgICApKTtcbiAgICAgICAgICBzZXRTZWxlY3RlZE5vZGVzKFtdKTtcbiAgICAgICAgICBzZXRTZWxlY3RlZEVkZ2VzKFtdKTtcbiAgICAgICAgICBzYXZlVG9IaXN0b3J5KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERlbGV0ZSBzZWxlY3RlZCBlZGdlc1xuICAgICAgICBpZiAoc2VsZWN0ZWRFZGdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRFZGdlSWRzID0gc2VsZWN0ZWRFZGdlcy5tYXAoZWRnZSA9PiBlZGdlLmlkKTtcbiAgICAgICAgICBzZXRFZGdlcyhlZGdlcy5maWx0ZXIoZWRnZSA9PiAhc2VsZWN0ZWRFZGdlSWRzLmluY2x1ZGVzKGVkZ2UuaWQpKSk7XG4gICAgICAgICAgc2V0U2VsZWN0ZWRFZGdlcyhbXSk7XG4gICAgICAgICAgc2F2ZVRvSGlzdG9yeSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVuZG8gKEN0cmwrWilcbiAgICAgIGlmIChldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PT0gJ3onKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHVuZG8oKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XG4gIH0sIFtzZWxlY3RlZE5vZGVzLCBzZWxlY3RlZEVkZ2VzLCBub2RlcywgZWRnZXMsIGNsaXBib2FyZCwgc2V0Tm9kZXMsIHNldEVkZ2VzLCBzZXRTZWxlY3RlZE5vZGVzLCBzZXRTZWxlY3RlZEVkZ2VzLCBzZXRDbGlwYm9hcmQsIHNhdmVUb0hpc3RvcnksIHVuZG8sIGdlbmVyYXRlTm9kZUlkLCBnZW5lcmF0ZUVkZ2VJZF0pO1xuXG4gIGNvbnN0IG9uTm9kZXNDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoY2hhbmdlczogTm9kZUNoYW5nZVtdKSA9PiB7XG4gICAgICBzZXROb2RlcyhhcHBseU5vZGVDaGFuZ2VzKGNoYW5nZXMsIG5vZGVzKSk7XG4gICAgfSxcbiAgICBbbm9kZXMsIHNldE5vZGVzXVxuICApO1xuXG4gIGNvbnN0IG9uRWRnZXNDaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAoY2hhbmdlczogRWRnZUNoYW5nZVtdKSA9PiB7XG4gICAgICBzZXRFZGdlcyhhcHBseUVkZ2VDaGFuZ2VzKGNoYW5nZXMsIGVkZ2VzKSk7XG4gICAgfSxcbiAgICBbZWRnZXMsIHNldEVkZ2VzXVxuICApO1xuXG4gIGNvbnN0IG9uQ29ubmVjdCA9IHVzZUNhbGxiYWNrKFxuICAgIChwYXJhbXM6IENvbm5lY3Rpb24pID0+IHtcbiAgICAgIGNvbnN0IG5ld0VkZ2UgPSB7IFxuICAgICAgICBpZDogZ2VuZXJhdGVFZGdlSWQoKSxcbiAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHN0cm9rZUNvbG9yOiAnIzcwZicsXG4gICAgICAgICAgc3Ryb2tlV2lkdGg6IDIsXG4gICAgICAgICAgc3Ryb2tlU3R5bGU6ICdzb2xpZCcsXG4gICAgICAgICAgYW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgIHNob3dBcnJvdzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgICBzZXRFZGdlcyhhZGRFZGdlKG5ld0VkZ2UsIGVkZ2VzKSk7XG4gICAgICBzYXZlVG9IaXN0b3J5KCk7XG4gICAgfSxcbiAgICBbZWRnZXMsIHNldEVkZ2VzLCBzYXZlVG9IaXN0b3J5LCBnZW5lcmF0ZUVkZ2VJZF1cbiAgKTtcblxuICBjb25zdCBvblBhbmVDbGljayA9IHVzZUNhbGxiYWNrKFxuICAgIChldmVudDogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gQ2xvc2UgYW55IG9wZW4gcG9wdXBzIGFuZCBlZGl0aW5nIHN0YXRlIHdoZW4gY2xpY2tpbmcgb24gZW1wdHkgY2FudmFzXG4gICAgICBjb25zdCBzdGF0ZSA9IHVzZUFwcFN0b3JlLmdldFN0YXRlKCk7XG4gICAgICBzdGF0ZS5zZXRFZGl0aW5nTm9kZUlkKG51bGwpO1xuICAgICAgXG4gICAgICAvLyBGb3JjZSBjbG9zZSBhbGwgcG9wdXBzIGJ5IHRyaWdnZXJpbmcgYSBnbG9iYWwgcG9wdXAgY2xvc2UgZXZlbnRcbiAgICAgIGNvbnN0IHBvcHVwQ2xvc2VFdmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2xvc2VBbGxQb3B1cHMnKTtcbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQocG9wdXBDbG9zZUV2ZW50KTtcbiAgICAgIFxuICAgICAgaWYgKGN1cnJlbnRUb29sID09PSAnc2VsZWN0JykgcmV0dXJuO1xuXG4gICAgICBjb25zdCBib3VuZHMgPSByZWFjdEZsb3dXcmFwcGVyLmN1cnJlbnQ/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgaWYgKCFib3VuZHMpIHJldHVybjtcblxuICAgICAgY29uc3QgcG9zaXRpb24gPSBwcm9qZWN0KHtcbiAgICAgICAgeDogZXZlbnQuY2xpZW50WCAtIGJvdW5kcy5sZWZ0LFxuICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gYm91bmRzLnRvcCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBuZXdOb2RlOiBOb2RlID0ge1xuICAgICAgICBpZDogZ2VuZXJhdGVOb2RlSWQoKSxcbiAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgIHBvc2l0aW9uLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIG5vZGVUeXBlOiBjdXJyZW50VG9vbCA9PT0gJ2xhYmVsJyA/ICdsYWJlbCcgOiBjdXJyZW50VG9vbCxcbiAgICAgICAgICB3aWR0aDogY3VycmVudFRvb2wgPT09ICdsYWJlbCcgPyA4MCA6IGN1cnJlbnRUb29sID09PSAnY2lyY2xlJyA/IDgwIDogOTAsXG4gICAgICAgICAgaGVpZ2h0OiBjdXJyZW50VG9vbCA9PT0gJ2xhYmVsJyA/IDMwIDogY3VycmVudFRvb2wgPT09ICdjaXJjbGUnID8gODAgOiA2MCxcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICB0ZXh0Q29sb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICBib3JkZXJTdHlsZTogJ3NvbGlkJyxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIHNldE5vZGVzKFsuLi5ub2RlcywgbmV3Tm9kZV0pO1xuICAgICAgc2F2ZVRvSGlzdG9yeSgpO1xuICAgICAgXG4gICAgICAvLyBBdXRvLXN3aXRjaCBiYWNrIHRvIHNlbGVjdCBtb2RlIGFmdGVyIGNyZWF0aW5nIGEgc2hhcGVcbiAgICAgIHNldEN1cnJlbnRUb29sKCdzZWxlY3QnKTtcbiAgICB9LFxuICAgIFtjdXJyZW50VG9vbCwgcHJvamVjdCwgbm9kZXMsIHNldE5vZGVzLCBzYXZlVG9IaXN0b3J5LCBzZXRDdXJyZW50VG9vbCwgZ2VuZXJhdGVOb2RlSWRdXG4gICk7XG5cbiAgY29uc3Qgb25TZWxlY3Rpb25DaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICAocGFyYW1zOiBPblNlbGVjdGlvbkNoYW5nZVBhcmFtcykgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWROb2RlcyhwYXJhbXMubm9kZXMpO1xuICAgICAgc2V0U2VsZWN0ZWRFZGdlcyhwYXJhbXMuZWRnZXMpO1xuICAgIH0sXG4gICAgW3NldFNlbGVjdGVkTm9kZXMsIHNldFNlbGVjdGVkRWRnZXNdXG4gICk7XG5cbiAgY29uc3Qgb25Ob2RlQ2xpY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQsIG5vZGU6IE5vZGUpID0+IHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgLy8gQWxsb3cgdGhlIG5vZGUncyBvd24gY2xpY2sgaGFuZGxlciB0byBtYW5hZ2UgcG9wdXAgc3RhdGVcbiAgICB9LFxuICAgIFtdXG4gICk7XG5cbiAgY29uc3Qgb25FZGdlQ2xpY2sgPSB1c2VDYWxsYmFjayhcbiAgICAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQsIGVkZ2U6IEVkZ2UpID0+IHtcbiAgICB9LFxuICAgIFtdXG4gICk7XG5cbiAgY29uc3Qgb25Ob2RlRHJhZ1N0b3AgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2F2ZVRvSGlzdG9yeSgpO1xuICB9LCBbc2F2ZVRvSGlzdG9yeV0pO1xuXG4gIC8vIEN1c3RvbSBub2RlIHR5cGVzIHdpdGggbGF5b3V0LWF3YXJlIGhhbmRsZXNcbiAgY29uc3Qgbm9kZVR5cGVzID0gdXNlTWVtbygoKSA9PiAoe1xuICAgIGN1c3RvbTogKHByb3BzOiBhbnkpID0+IDxDdXN0b21Ob2RlIHsuLi5wcm9wc30gbGF5b3V0PXtjdXJyZW50TGF5b3V0fSAvPixcbiAgfSksIFtjdXJyZW50TGF5b3V0XSk7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGxcIiByZWY9e3JlYWN0Rmxvd1dyYXBwZXJ9PlxuICAgICAgPFJlYWN0Rmxvd1xuICAgICAgICBub2Rlcz17bm9kZXN9XG4gICAgICAgIGVkZ2VzPXtlZGdlc31cbiAgICAgICAgb25Ob2Rlc0NoYW5nZT17b25Ob2Rlc0NoYW5nZX1cbiAgICAgICAgb25FZGdlc0NoYW5nZT17b25FZGdlc0NoYW5nZX1cbiAgICAgICAgb25Db25uZWN0PXtvbkNvbm5lY3R9XG4gICAgICAgIG9uUGFuZUNsaWNrPXtvblBhbmVDbGlja31cbiAgICAgICAgb25Ob2RlQ2xpY2s9e29uTm9kZUNsaWNrfVxuICAgICAgICBvbkVkZ2VDbGljaz17b25FZGdlQ2xpY2t9XG4gICAgICAgIG9uTm9kZURyYWdTdG9wPXtvbk5vZGVEcmFnU3RvcH1cbiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICBub2RlVHlwZXM9e25vZGVUeXBlc31cbiAgICAgICAgZWRnZVR5cGVzPXtlZGdlVHlwZXN9XG4gICAgICAgIGZpdFZpZXdcbiAgICAgICAgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBkYXJrOmJnLVsjMGEwYTBhXVwiXG4gICAgICAgIG5vZGVzRHJhZ2dhYmxlPXtjdXJyZW50VG9vbCA9PT0gJ3NlbGVjdCd9XG4gICAgICAgIG5vZGVzQ29ubmVjdGFibGU9e2N1cnJlbnRUb29sID09PSAnc2VsZWN0J31cbiAgICAgICAgZWxlbWVudHNTZWxlY3RhYmxlPXtjdXJyZW50VG9vbCA9PT0gJ3NlbGVjdCd9XG4gICAgICAgIHBhbk9uRHJhZz17Y3VycmVudFRvb2wgPT09ICdzZWxlY3QnfVxuICAgICAgICB6b29tT25TY3JvbGw9e2N1cnJlbnRUb29sID09PSAnc2VsZWN0J31cbiAgICAgICAgLy8gY29ubmVjdGlvbk1vZGU9XCJsb29zZVwiXG4gICAgICA+XG4gICAgICAgIDxDb250cm9scyBcbiAgICAgICAgICBwb3NpdGlvbj1cImJvdHRvbS1yaWdodFwiIFxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLXdoaXRlIGRhcms6YmctWyMxMDEwMTBdIGJvcmRlciBib3JkZXItZ3JheS0yMDAgZGFyazpib3JkZXItZ3JheS03MDBcIlxuICAgICAgICAvPlxuICAgICAgPC9SZWFjdEZsb3c+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDYW52YXMoKSB7XG4gIHJldHVybiAoXG4gICAgPFJlYWN0Rmxvd1Byb3ZpZGVyPlxuICAgICAgPFRvb2xiYXIgLz5cbiAgICAgIDxGbG93Q2FudmFzIC8+XG4gICAgPC9SZWFjdEZsb3dQcm92aWRlcj5cbiAgKTtcbn0iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJ1c2VNZW1vIiwiUmVhY3RGbG93IiwiUmVhY3RGbG93UHJvdmlkZXIiLCJhZGRFZGdlIiwiYXBwbHlOb2RlQ2hhbmdlcyIsImFwcGx5RWRnZUNoYW5nZXMiLCJDb250cm9scyIsInVzZVJlYWN0RmxvdyIsInVzZUFwcFN0b3JlIiwiQ3VzdG9tTm9kZSIsIkN1c3RvbUVkZ2UiLCJUb29sYmFyIiwibm9kZVR5cGVzIiwiY3VzdG9tIiwiZWRnZVR5cGVzIiwiRmxvd0NhbnZhcyIsInJlYWN0Rmxvd1dyYXBwZXIiLCJjdXJyZW50VG9vbCIsInNldEN1cnJlbnRUb29sIiwiY3VycmVudExheW91dCIsIm5vZGVzIiwiZWRnZXMiLCJzZXROb2RlcyIsInNldEVkZ2VzIiwic2F2ZVRvSGlzdG9yeSIsInVuZG8iLCJzZWxlY3RlZE5vZGVzIiwic2VsZWN0ZWRFZGdlcyIsInNldFNlbGVjdGVkTm9kZXMiLCJzZXRTZWxlY3RlZEVkZ2VzIiwiY2xpcGJvYXJkIiwic2V0Q2xpcGJvYXJkIiwicHJvamVjdCIsImdlbmVyYXRlTm9kZUlkIiwiTWF0aCIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJnZW5lcmF0ZUVkZ2VJZCIsImhhbmRsZUtleURvd24iLCJldmVudCIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsInRhZ05hbWUiLCJjdHJsS2V5Iiwia2V5IiwicHJldmVudERlZmF1bHQiLCJsZW5ndGgiLCJzZWxlY3RlZE5vZGVJZHMiLCJtYXAiLCJub2RlIiwiaWQiLCJmaWx0ZXIiLCJlZGdlIiwiaW5jbHVkZXMiLCJzb3VyY2UiLCJ0YXJnZXQiLCJub2RlSWRNYXAiLCJNYXAiLCJuZXdOb2RlcyIsIm5ld0lkIiwic2V0IiwicG9zaXRpb24iLCJ4IiwieSIsInNlbGVjdGVkIiwibmV3RWRnZXMiLCJnZXQiLCJzZWxlY3RlZEVkZ2VJZHMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uTm9kZXNDaGFuZ2UiLCJjaGFuZ2VzIiwib25FZGdlc0NoYW5nZSIsIm9uQ29ubmVjdCIsInBhcmFtcyIsIm5ld0VkZ2UiLCJ0eXBlIiwiZGF0YSIsInN0cm9rZUNvbG9yIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VTdHlsZSIsImFuaW1hdGVkIiwic2hvd0Fycm93Iiwib25QYW5lQ2xpY2siLCJzdGF0ZSIsImdldFN0YXRlIiwic2V0RWRpdGluZ05vZGVJZCIsInBvcHVwQ2xvc2VFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImJvdW5kcyIsImN1cnJlbnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjbGllbnRYIiwibGVmdCIsImNsaWVudFkiLCJ0b3AiLCJuZXdOb2RlIiwibGFiZWwiLCJub2RlVHlwZSIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZENvbG9yIiwidW5kZWZpbmVkIiwidGV4dENvbG9yIiwiYm9yZGVyU3R5bGUiLCJvblNlbGVjdGlvbkNoYW5nZSIsIm9uTm9kZUNsaWNrIiwic3RvcFByb3BhZ2F0aW9uIiwib25FZGdlQ2xpY2siLCJvbk5vZGVEcmFnU3RvcCIsInByb3BzIiwibGF5b3V0IiwiZGl2IiwiY2xhc3NOYW1lIiwicmVmIiwiZml0VmlldyIsIm5vZGVzRHJhZ2dhYmxlIiwibm9kZXNDb25uZWN0YWJsZSIsImVsZW1lbnRzU2VsZWN0YWJsZSIsInBhbk9uRHJhZyIsInpvb21PblNjcm9sbCIsIkNhbnZhcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/canvas.tsx\n"));

/***/ })

});